name: ContainerLab
mgmt:
  network: clab-mgmt
  ipv4-subnet: 192.168.0.0/24

topology:
  kinds:
    arista_ceos:
      image: ceos:4.30.1F
      env:
        CLAB_MGMT_VRF: MGMT

  nodes:

    DC1-Borderleaf1:
      kind: arista_ceos
      group: leaf
      mgmt-ipv4: 192.168.0.51
      startup-delay: 10
      startup-config: init-configs/DC1/Borderleaf1.cfg
      ports:
        - "2051:22"

    DC1-Spine1:
      kind: arista_ceos
      group: spine
      mgmt-ipv4: 192.168.0.11
      startup-delay: 0
      startup-config: init-configs/DC1/Spine1.cfg
      ports:
        - "2011:22"
        
    DC1-Spine2:
      kind: arista_ceos
      group: spine
      mgmt-ipv4: 192.168.0.12
      startup-delay: 0
      startup-config: init-configs/DC1/Spine2.cfg
      ports:
        - "2012:22"

    DC1-Leaf1:
      kind: arista_ceos
      group: leaf
      mgmt-ipv4: 192.168.0.21
      startup-delay: 0
      startup-config: init-configs/DC1/Leaf1.cfg
      ports:
        - "2021:22"

    DC1-Leaf2:
      kind: arista_ceos
      group: leaf
      mgmt-ipv4: 192.168.0.22
      startup-delay: 0
      startup-config: init-configs/DC1/Leaf2.cfg
      ports:
        - "2022:22"

    DC1-Leaf3:
      kind: arista_ceos
      group: leaf
      mgmt-ipv4: 192.168.0.23
      startup-delay: 0
      startup-config: init-configs/DC1/Leaf3.cfg
      ports:
        - "2023:22"

    DC1-Leaf4:
      kind: arista_ceos
      group: leaf
      mgmt-ipv4: 192.168.0.24
      startup-delay: 0
      startup-config: init-configs/DC1/Leaf4.cfg
      ports:
        - "2024:22"

    DC1-Host1:
      kind: arista_ceos
      group: host
      mgmt-ipv4: 192.168.0.31
      startup-delay: 0
      startup-config: init-configs/DC1/Host1.cfg
      ports:
        - "2031:22"

    DC1-Host2:
      kind: arista_ceos
      group: host
      mgmt-ipv4: 192.168.0.32
      startup-delay: 0
      startup-config: init-configs/DC1/Host2.cfg
      ports:
        - "2032:22"

    DC1-Host3:
      kind: arista_ceos
      group: host
      mgmt-ipv4: 192.168.0.33
      startup-delay: 0
      startup-config: init-configs/DC1/Host3.cfg
      ports:
        - "2033:22"

  links:

    # Leaf1 <-> Leaf2 peer links
    - endpoints: ["DC1-Leaf1:eth1","DC1-Leaf2:eth1"]
    - endpoints: ["DC1-Leaf1:eth2","DC1-Leaf2:eth2"]

    # Leaf -> Spine (per mapping)
    - endpoints: ["DC1-Leaf1:eth3","DC1-Spine1:eth3"]
    - endpoints: ["DC1-Leaf1:eth4","DC1-Spine2:eth3"]

    - endpoints: ["DC1-Leaf2:eth3","DC1-Spine1:eth4"]
    - endpoints: ["DC1-Leaf2:eth4","DC1-Spine2:eth4"]

    - endpoints: ["DC1-Leaf3:eth3","DC1-Spine1:eth5"]
    - endpoints: ["DC1-Leaf3:eth4","DC1-Spine2:eth5"]

    - endpoints: ["DC1-Leaf4:eth3","DC1-Spine1:eth6"]
    - endpoints: ["DC1-Leaf4:eth4","DC1-Spine2:eth6"]
  
  # Spines -> Borderleaf1 peer links
    - endpoints: ["DC1-Borderleaf1:eth3","DC1-Spine1:eth7"]
    - endpoints: ["DC1-Borderleaf1:eth4","DC1-Spine2:eth7"]

  # Leaf -> Host (per mapping)
    - endpoints: ["DC1-Leaf1:eth7","DC1-Host1:eth1"]
    - endpoints: ["DC1-Leaf2:eth7","DC1-Host1:eth2"]
    - endpoints: ["DC1-Leaf3:eth7","DC1-Host2:eth1"]
    - endpoints: ["DC1-Leaf4:eth9","DC1-Host3:eth2"]
